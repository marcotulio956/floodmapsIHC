<!DOCTYPE html>
<html>
<head>
    <title>Gráfico de Nível de Água</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        #waterLevelChart {
            font-family: 'Arial', sans-serif;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            max-width: 800px;
            margin: 20px;
        }
    </style>
</head>
<body>
    <canvas id="waterLevelChart"></canvas>

    <script>
        const ctx = document.getElementById('waterLevelChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['10:00', '11:00', '12:00', 'Agora', '13:00', '14:00', '15:00'],
                datasets: [{
                    label: 'Nível da Água (mm)',
                    data: [50, 180, 320, 400, 480, 550, 620],
                    borderColor: '#0066ff',
                    borderWidth: 3,
                    tension: 0.4,
                    segment: {
                        // Linha contínua até "Agora" (índice 3)
                        borderDash: (ctx) => ctx.p0DataIndex >= 3 ? [5, 5] : [0, 0]
                    },
                    pointBackgroundColor: [
                        '#0066ff', '#0066ff', '#0066ff', 
                        '#ff0000',  // Destaque para "Agora"
                        '#0066ff88', '#0066ff88', '#0066ff88' // Previsões (transparência)
                    ],
                    pointRadius: 5,
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        min: 0,
                        max: 600,
                        ticks: {
                            callback: (value) => value + ' mm',
                            font: { size: 12 }
                        },
                        grid: {
                            color: (context) => 
                                [150, 300, 600].includes(context.tick.value) ? '#ff000033' : '#eee',
                        }
                    },
                    x: {
                        grid: { color: '#ddd' },
                        ticks: { font: { size: 14 } }
                    }
                },
                plugins: {
                    annotation: {
                        annotations: {
                            linha150: {
                                type: 'line',
                                yMin: 150,
                                yMax: 150,
                                borderColor: '#ffa500',
                                borderWidth: 2,
                                borderDash: [5, 5],
                                label: { content: 'Baixo (150mm)', position: 'start' }
                            },
                            linha300: {
                                type: 'line',
                                yMin: 300,
                                yMax: 300,
                                borderColor: '#ffa500',
                                borderWidth: 2,
                                borderDash: [5, 5],
                                label: { content: 'Moderado (300mm)', position: 'start' }
                            },
                            linha600: {
                                type: 'line',
                                yMin: 600,
                                yMax: 600,
                                borderColor: '#ff0000',
                                borderWidth: 2,
                                borderDash: [5, 5],
                                label: { content: 'Alto (600mm)', position: 'start' }
                            }
                        }
                    },
                    legend: { display: false }
                }
            }
        });
    </script>
</body>
</html>